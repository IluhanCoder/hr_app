# ‚ú® –î–∏–Ω–∞–º—ñ—á–Ω—ñ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞

## üéØ –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å

–†–∞–Ω—ñ—à–µ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ —Å–ø–∏—Å–æ–∫ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ñ–≤ –±—É–≤ **—Å—Ç–∞—Ç–∏—á–Ω–∏–º** (–∂–æ—Ä—Å—Ç–∫–æ –∑–∞–∫–æ–¥–æ–≤–∞–Ω–∏–π –≤ –∫–æ–¥—ñ).

–¢–µ–ø–µ—Ä —Å–ø–∏—Å–æ–∫ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ñ–≤ **–¥–∏–Ω–∞–º—ñ—á–Ω–∏–π** - –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –Ω–∞ –æ—Å–Ω–æ–≤—ñ —ñ—Å–Ω—É—é—á–∏—Ö —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤.

---

## üîß –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### Backend

#### 1. –ù–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä (`server/src/user/user.controller.ts`)

```typescript
/**
 * GET /api/users/departments
 * –û—Ç—Ä–∏–º–∞–Ω–Ω—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ñ–≤ –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
 */
export const getDepartments = async (req: AuthRequest, res: Response): Promise<void> => {
  try {
    // –û—Ç—Ä–∏–º—É—î–º–æ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏ –∑ —É—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
    const departments = await User.distinct("jobInfo.department");
    
    // –§—ñ–ª—å—Ç—Ä—É—î–º–æ null/undefined –∑–Ω–∞—á–µ–Ω–Ω—è
    const validDepartments = departments.filter(dept => dept);
    
    res.status(200).json({
      success: true,
      data: validDepartments,
      count: validDepartments.length,
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: "Failed to fetch departments",
      error: error instanceof Error ? error.message : "Unknown error",
    });
  }
};
```

#### 2. –ù–æ–≤–∏–π –º–∞—Ä—à—Ä—É—Ç (`server/src/user/user.routes.ts`)

```typescript
/**
 * GET /api/users/departments
 * –û—Ç—Ä–∏–º–∞–Ω–Ω—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ñ–≤
 * –î–æ—Å—Ç—É–ø: HR Manager, Admin, Recruiter
 */
router.get("/users/departments", authMiddleware, getDepartments);
```

### Frontend

#### 3. –û–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞ (`client/src/pages/NewCandidate.tsx`)

```typescript
const [departments, setDepartments] = useState<string[]>([]);

const fetchDepartments = async () => {
  try {
    const response = await apiClient.get("/users/departments");
    setDepartments(response.data.data || []);
  } catch (error) {
    console.error("Error fetching departments:", error);
    // Fallback –¥–æ —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É —É —Ä–∞–∑—ñ –ø–æ–º–∏–ª–∫–∏
    setDepartments(["IT", "HR", "Finance", "Sales", "Marketing", "Operations", "Support"]);
  }
};

// –£ JSX:
<select value={form.department} onChange={...}>
  <option value="">–û–±–µ—Ä—ñ—Ç—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç</option>
  {departments.length === 0 ? (
    <option disabled>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</option>
  ) : (
    departments.map((dept) => (
      <option key={dept} value={dept}>
        {dept.toUpperCase()}
      </option>
    ))
  )}
</select>
```

---

## üí° –ü–µ—Ä–µ–≤–∞–≥–∏

### 1. **–ê–∫—Ç—É–∞–ª—å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö**
–°–ø–∏—Å–æ–∫ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ñ–≤ –∑–∞–≤–∂–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ä–µ–∞–ª—å–Ω—ñ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ –∫–æ–º–ø–∞–Ω—ñ—ó.

### 2. **–ì–Ω—É—á–∫—ñ—Å—Ç—å**
- –î–æ–¥–∞–ª–∏ –Ω–æ–≤–∏–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç? –í—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑'—è–≤–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫—É
- –í–∏–¥–∞–ª–∏–ª–∏ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞ –∑ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É? –í—ñ–Ω –∑–Ω–∏–∫–Ω–µ –∑—ñ —Å–ø–∏—Å–∫—É

### 3. **–ë–µ–∑–ø–µ–∫–∞ –¥–∞–Ω–∏—Ö**
–ù–µ–º–æ–∂–ª–∏–≤–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –¥–ª—è –Ω–µ—ñ—Å–Ω—É—é—á–æ–≥–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É.

### 4. **Fallback –º–µ—Ö–∞–Ω—ñ–∑–º**
–Ø–∫—â–æ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Å—Ç–∞—Ç–∏—á–Ω–∏–π —Å–ø–∏—Å–æ–∫.

---

## üß™ –Ø–∫ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏

### –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ç–æ—á–Ω—ñ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `/employees`
2. –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è —è–∫—ñ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏ —î —É —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤
3. –ó–∞–ø–∞–º'—è—Ç–∞–π—Ç–µ —ó—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: IT, HR, Finance)

### –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä—ñ—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `/recruitment/new`
2. –†–æ–∑–≥–æ—Ä–Ω—ñ—Ç—å —Å–ø–∏—Å–æ–∫ "–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç"
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ** - –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ —Ç—ñ–ª—å–∫–∏ —Ç—ñ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏, —è–∫—ñ —î –≤ –±–∞–∑—ñ!

### –ö—Ä–æ–∫ 3: –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–æ–≥–æ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞ –∑ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–º "Marketing"
2. –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –Ω–∞ `/recruitment/new`
3. –û–Ω–æ–≤—ñ—Ç—å —Å—Ç–æ—Ä—ñ–Ω–∫—É
4. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ** - "Marketing" —Ç–µ–ø–µ—Ä —É —Å–ø–∏—Å–∫—É!

---

## üìä –ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API

### Request
```bash
GET /api/users/departments
Authorization: Bearer <token>
```

### Response
```json
{
  "success": true,
  "data": [
    "it",
    "hr",
    "finance",
    "sales"
  ],
  "count": 4
}
```

---

## üîç –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è MongoDB distinct()

```typescript
const departments = await User.distinct("jobInfo.department");
```

–¶–µ–π –º–µ—Ç–æ–¥:
- ‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—î —Ç—ñ–ª—å–∫–∏ **—É–Ω—ñ–∫–∞–ª—å–Ω—ñ** –∑–Ω–∞—á–µ–Ω–Ω—è
- ‚úÖ –ü—Ä–∞—Ü—é—î **—à–≤–∏–¥–∫–æ** (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ–Ω–¥–µ–∫—Å–∏)
- ‚úÖ –ù–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –∑–∞–π–≤—ñ –¥–∞–Ω—ñ –≤ –ø–∞–º'—è—Ç—å

### –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è null/undefined

```typescript
const validDepartments = departments.filter(dept => dept);
```

–í–∏–¥–∞–ª—è—î –≤–∏–ø–∞–¥–∫–∏ –∫–æ–ª–∏:
- –°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –±–µ–∑ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É
- –ü–æ–ª–µ `jobInfo.department` = `null` –∞–±–æ `undefined`

---

## üé® UI –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

–î–æ–¥–∞–Ω–æ –ø—ñ–¥–∫–∞–∑–∫—É –ø—ñ–¥ –ø–æ–ª–µ–º –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É:
```
–í—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏ –∑ —ñ—Å–Ω—É—é—á–∏—Ö —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤
```

–¶–µ –¥–æ–ø–æ–º–∞–≥–∞—î —Ä–µ–∫—Ä—É—Ç–µ—Ä–∞–º –∑—Ä–æ–∑—É–º—ñ—Ç–∏ –∑–≤—ñ–¥–∫–∏ –±–µ—Ä–µ—Ç—å—Å—è —Å–ø–∏—Å–æ–∫.

---

## üöÄ –î–µ —â–µ –º–æ–∂–Ω–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏

–¶–µ–π –ø—ñ–¥—Ö—ñ–¥ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –¥–ª—è:

1. **–ü–æ—Å–∞–¥–∏** - –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ—Å–∞–¥ –∑ –±–∞–∑–∏
2. **–ú—ñ—Å—Ç–∞/–û—Ñ—ñ—Å–∏** - —è–∫—â–æ –∫–æ–º–ø–∞–Ω—ñ—è –º–∞—î –∫—ñ–ª—å–∫–∞ –ª–æ–∫–∞—Ü—ñ–π
3. **–ü—Ä–æ–µ–∫—Ç–∏** - —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤ –¥–ª—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è
4. **–ù–∞–≤–∏—á–∫–∏** - –ø–æ–ø—É–ª—è—Ä–Ω—ñ –Ω–∞–≤–∏—á–∫–∏ –∑ –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–æ—á–Ω–∏–π —á–µ–∫–ª–∏—Å—Ç

- [ ] Backend: –ï–Ω–¥–ø–æ—ñ–Ω—Ç `/api/users/departments` –ø–æ–≤–µ—Ä—Ç–∞—î —Å–ø–∏—Å–æ–∫
- [ ] Frontend: –°–ø–∏—Å–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —Ñ–æ—Ä–º–∏
- [ ] UI: –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è..." –ø–æ–∫–∏ –¥–∞–Ω—ñ –Ω–µ –ø—Ä–∏–π—à–ª–∏
- [ ] UI: –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —É –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä–µ–≥—ñ—Å—Ç—Ä—ñ (IT, HR)
- [ ] Fallback: –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ API –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Å—Ç–∞—Ç–∏—á–Ω–∏–π —Å–ø–∏—Å–æ–∫
- [ ] –î–∏–Ω–∞–º—ñ–∫–∞: –ù–æ–≤–∏–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑'—è–≤–ª—è—î—Ç—å—Å—è

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ —Ç–µ–ø–µ—Ä –±—ñ–ª—å—à **—ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–µ** —Ç–∞ **–≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ä–µ–∞–ª—å–Ω—ñ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ** –∫–æ–º–ø–∞–Ω—ñ—ó!

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞! üöÄ**
